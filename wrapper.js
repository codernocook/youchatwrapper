const fetch=(...args)=>import("node-fetch").then(({"default":fetch})=>fetch(...args));let cloudflare_change="duetocloudflarelimitsi'mcurentlygettingnewcookies,pleasetryagain.";module.exports={apiKey:String,customUrl:String,retry_limit:Number,chat(message,callback){(async()=>{const msg=message.replace(" ","+");let apiKeyGiven=undefined;let req_url=`https://api.betterapi.net/youdotcom/chat?message=${msg}&key=${apiKeyGiven}`;let req_counter=0;let cloudflare_retry_limit=this.retry_limit||3;if(this.apiKey&&typeof this.apiKey==="string"){apiKeyGiven=this.apiKey.trim()}else{apiKeyGiven=""}if(this.customUrl&&typeof this.customUrl==="string"){req_url=this.customUrl+`/chat?message=${msg}&key=${apiKeyGiven}`}else{req_url=`https://api.betterapi.net/youdotcom/chat?message=${msg}&key=${apiKeyGiven}`}if(cloudflare_retry_limit){if(Number(this.retry_limit)===NaN)cloudflare_retry_limit=3;cloudflare_retry_limit=Number(this.retry_limit)}function execute_get_req(){fetch(req_url).then(res=>res.json()).then(json=>{try{setTimeout(()=>{if(!json)return callback("We're sorry, something went wrong while processing your request. Please try again.");if(!json["message"])return callback("We're sorry, something went wrong while processing your request. Please try again.");if(json["message"].toLowerCase().replace(/ /g,"")===cloudflare_change){req_counter++;if(req_counter>cloudflare_retry_limit)return callback("We're sorry, something went wrong while processing your request. Please try again.");setTimeout(()=>{execute_get_req()},800)}callback(json["message"])},500)}catch(err){throw err}})}execute_get_req()})()}};