//Source code in "/src" dir
const fetch=(...args)=>import("node-fetch").then(({"default":fetch})=>fetch(...args));let cloudflare_change="due to cloudflare limits i'm curently getting new cookies, please try again.";let cloudflare_change_1="cloudflare error";module.exports={apiKey:String,customUrl:String,cloudflare_message_bypass:Boolean,cloudflare_retry_limit:Number,retry:Boolean,retry_limit:Number,chat(message,callback){(async()=>{const msg=message.replace(" ","+");let apiKeyGiven=undefined;let req_url=`https://api.betterapi.net/youdotcom/chat?message=${msg}&key=${apiKeyGiven}`;let req_counter=0;let req_err_counter=0;let cloudflare_retry_limit_value=this.cloudflare_retry_limit||3;let cloudflare_message_bypass_value=this.cloudflare_message_bypass||false;let retry_value=this.retry||false;let retry_limit_value=this.retry_limit||3;if(this.apiKey&&typeof this.apiKey==="string"){apiKeyGiven=this.apiKey.trim()}else{apiKeyGiven=""}if(this.customUrl&&typeof this.customUrl==="string"){req_url=this.customUrl+`/chat?message=${msg}&key=${apiKeyGiven}`}else{req_url=`https://api.betterapi.net/youdotcom/chat?message=${msg}&key=${apiKeyGiven}`}if(cloudflare_retry_limit_value){if(Number(this.cloudflare_retry_limit)===NaN)cloudflare_retry_limit_value=3;cloudflare_retry_limit_value=Number(this.cloudflare_retry_limit)}function execute_get_req(){fetch(req_url).then(res=>res.json()).then(json=>{try{setTimeout(()=>{if(!json){req_err_counter++;if(req_err_counter>retry_limit_value)return callback("We're sorry, something went wrong while processing your request. Please try again.");if(retry_value===true){return execute_get_req()}else if(retry_value===false){return callback("We're sorry, something went wrong while processing your request. Please try again.")}}if(json["error"]){req_err_counter++;if(req_err_counter>retry_limit_value)return callback("We're sorry, something went wrong while processing your request. Please try again.");if(retry_value===true){return execute_get_req()}else if(retry_value===false){return callback("We're sorry, something went wrong while processing your request. Please try again.")}}if(!json["message"]){req_err_counter++;if(req_err_counter>retry_limit_value)return callback("We're sorry, something went wrong while processing your request. Please try again.");if(retry_value===true){return execute_get_req()}else if(retry_value===false){return callback("We're sorry, something went wrong while processing your request. Please try again.")}}if(!json["time"]){req_err_counter++;if(req_err_counter>retry_limit_value)return callback("We're sorry, something went wrong while processing your request. Please try again.");if(retry_value===true){return execute_get_req()}else if(retry_value===false){return callback("We're sorry, something went wrong while processing your request. Please try again.")}}if(!Number(json["time"])){req_err_counter++;if(req_err_counter>retry_limit_value)return callback("We're sorry, something went wrong while processing your request. Please try again.");if(retry_value===true){return execute_get_req()}else if(retry_value===false){return callback("We're sorry, something went wrong while processing your request. Please try again.")}}if((json["message"].toLowerCase()===cloudflare_change||json["message"].toLowerCase()===cloudflare_change_1)&&cloudflare_message_bypass_value===true){req_counter++;if(req_counter>cloudflare_retry_limit_value)return callback("We're sorry, something went wrong while processing your request. Please try again.");return setTimeout(()=>{return execute_get_req()},800)}let time=Number(json["time"])||1;if(json["message"]===""&&time<2){req_err_counter++;if(req_err_counter>retry_limit_value)return callback("We're sorry, something went wrong while processing your request. Please try again.");if(retry_value===true){return execute_get_req()}else if(retry_value===false){return callback("We're sorry, something went wrong while processing your request. Please try again.")}}callback(json["message"])},500)}catch(err){req_err_counter++;if(req_err_counter>retry_limit_value)return callback("We're sorry, something went wrong while processing your request. Please try again.");if(retry_value===true){return execute_get_req()}else if(retry_value===false){return callback("We're sorry, something went wrong while processing your request. Please try again.")}}})}execute_get_req()})()}};